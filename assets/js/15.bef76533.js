(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{250:function(a,s,t){"use strict";t.r(s);var n=t(4),e=Object(n.a)({},function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"openwrt-基础"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#openwrt-基础","aria-hidden":"true"}},[a._v("#")]),a._v(" OpenWrt 基础 "),t("Badge",{attrs:{text:"整理中",type:"warn"}})],1),a._v(" "),t("h2",{attrs:{id:"flash分区"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#flash分区","aria-hidden":"true"}},[a._v("#")]),a._v(" Flash分区")]),a._v(" "),t("p",[a._v("Linux系统对闪存类存储器是采用MTD设备驱动实现的。")]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("    0.290000"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" spi-mt7621 10000b00.spi: sys_freq: 193333333\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("    0.300000"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" m25p80 spi32766.0: w25q256 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("32768 Kbytes"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("    0.300000"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" m25p80 spi32766.0: using chunked io\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("    0.310000"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" 4 ofpart partitions found on MTD device spi32766.0\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("    0.310000"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" Creating 4 MTD partitions on "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"spi32766.0"')]),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v(":")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("    0.320000"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" 0x000000000000-0x000000030000 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"u-boot"')]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("    0.320000"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" 0x000000030000-0x000000040000 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"u-boot-env"')]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("    0.330000"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" 0x000000040000-0x000000050000 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"factory"')]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("    0.340000"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" 0x000000050000-0x000002000000 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"firmware"')]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("    0.410000"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" 2 uimage-fw partitions found on MTD device firmware\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("    0.410000"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" 0x000000050000-0x000000168da1 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"kernel"')]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("    0.420000"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" 0x000000168da1-0x000002000000 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"rootfs"')]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("    0.420000"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" mtd: device 5 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("rootfs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("set")]),a._v(" to be root filesystem\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("    0.430000"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" 1 squashfs-split partitions found on MTD device rootfs\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("    0.440000"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" 0x000000620000-0x000002000000 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"rootfs_data"')]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br"),t("span",{staticClass:"line-number"},[a._v("10")]),t("br"),t("span",{staticClass:"line-number"},[a._v("11")]),t("br"),t("span",{staticClass:"line-number"},[a._v("12")]),t("br"),t("span",{staticClass:"line-number"},[a._v("13")]),t("br"),t("span",{staticClass:"line-number"},[a._v("14")]),t("br"),t("span",{staticClass:"line-number"},[a._v("15")]),t("br")])]),t("div",{staticClass:"tip custom-block"},[t("p",[a._v("系统在SPI设备上创建了4个MTD分区")])]),a._v(" "),t("table",[t("thead",[t("tr",[t("th",[a._v("分区名")]),a._v(" "),t("th",[a._v("分区作用")])])]),a._v(" "),t("tbody",[t("tr",[t("td",[a._v("u-boot")]),a._v(" "),t("td",[a._v("引导程序")])]),a._v(" "),t("tr",[t("td",[a._v("u-boot-env")]),a._v(" "),t("td",[a._v("引导程序的配置数据")])]),a._v(" "),t("tr",[t("td",[a._v("factory")]),a._v(" "),t("td",[a._v("路由器芯片的初始化参数")])]),a._v(" "),t("tr",[t("td",[a._v("firmware")]),a._v(" "),t("td",[a._v("固件分区")])]),a._v(" "),t("tr",[t("td",[a._v("kernel")]),a._v(" "),t("td",[a._v("固件分区"),t("br"),a._v("Linux 内核")])]),a._v(" "),t("tr",[t("td",[a._v("rootfs")]),a._v(" "),t("td",[a._v("固件分区"),t("br"),a._v("文件系统子集")])]),a._v(" "),t("tr",[t("td",[a._v("rootfs_rom")]),a._v(" "),t("td",[a._v("固件分区"),t("br"),a._v("文件系统子集"),t("br"),a._v("只读分区子集")])]),a._v(" "),t("tr",[t("td",[a._v("rootfs_data")]),a._v(" "),t("td",[a._v("固件分区"),t("br"),a._v("文件系统子集"),t("br"),a._v("可写分区子集")])])])]),a._v(" "),t("div",{staticClass:"tip custom-block"},[t("p",[a._v("分区存在子分区，kernel和rootfs就是firmware的子分区，rootfs_rom和rootfs_data就是rootfs的子分区。")])]),a._v(" "),t("h3",{attrs:{id:"查看系统mtd分配"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看系统mtd分配","aria-hidden":"true"}},[a._v("#")]),a._v(" 查看系统MTD分配")]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("root@Widora:~"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# cat /proc/mtd")]),a._v("\ndev:    size   erasesize  name\nmtd0: 00030000 00010000 "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"u-boot"')]),a._v("\nmtd1: 00010000 00010000 "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"u-boot-env"')]),a._v("\nmtd2: 00010000 00010000 "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"factory"')]),a._v("\nmtd3: 01fb0000 00010000 "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"firmware"')]),a._v("\nmtd4: 00118da1 00010000 "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"kernel"')]),a._v("\nmtd5: 01e9725f 00010000 "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"rootfs"')]),a._v("\nmtd6: 019e0000 00010000 "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"rootfs_data"')]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br")])]),t("h3",{attrs:{id:"查看系统mtd分配-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看系统mtd分配-2","aria-hidden":"true"}},[a._v("#")]),a._v(" 查看系统MTD分配")]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("root@Widora:~"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# cat /proc/partitions ")]),a._v("\nmajor   minor  "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#blocks    name")]),a._v("\n31       0        192   mtdblock0\n31       1         64   mtdblock1\n31       2         64   mtdblock2\n31       3      32448   mtdblock3\n31       4       1123   mtdblock4\n31       5      31324   mtdblock5\n31       6      26496   mtdblock6\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br")])]),t("h3",{attrs:{id:"读取-备份factory分区"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#读取-备份factory分区","aria-hidden":"true"}},[a._v("#")]),a._v(" 读取/备份factory分区")]),a._v(" "),t("p",[a._v("factory 分区（位于 /dev/mtd2）保存了重要的配置参数（如MAC地址，天线匹配参数等）。")]),a._v(" "),t("h4",{attrs:{id:"查看分区内容"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看分区内容","aria-hidden":"true"}},[a._v("#")]),a._v(" 查看分区内容")]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("root@Widora:~"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# hexdump /dev/mtd2")]),a._v("\n0000000 7628 0001 ef0c d2af b8a9 0000 0000 0000\n0000010 ffff ffff ffff ffff ffff ffff ffff ffff\n0000020 0000 0000 0020 0000 ef0c d2af b8a9 ef0c\n0000030 d2af b9a9 3422 2000 ffff 0100 0000 0000\n0000040 0000 0022 0000 0000 0030 0000 0000 0000\n0000050 0081 9400 b040 c640 c31a c2c3 c5c0 0027\n0000060 ffff ffff ffff ffff ffff ffff ffff ffff\n*\n00000a0 c6c6 c4c4 c0c4 c4c0 c4c4 c0c4 c0c0 0000\n00000b0 ffff ffff ffff ffff ffff ffff ffff ffff\n*\n00000f0 0000 0000 00d1 8800 0000 0000 0000 0000\n0000100 ffff ffff ffff ffff ffff ffff ffff ffff\n*\n0000120 0000 0000 0000 0000 0000 0000 0000 0077\n0000130 1d11 1d11 7f15 7f15 7f17 7f17 3b10 3b10\n0000140 ffff ffff ffff ffff ffff ffff ffff ffff\n*\n0010000\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br"),t("span",{staticClass:"line-number"},[a._v("10")]),t("br"),t("span",{staticClass:"line-number"},[a._v("11")]),t("br"),t("span",{staticClass:"line-number"},[a._v("12")]),t("br"),t("span",{staticClass:"line-number"},[a._v("13")]),t("br"),t("span",{staticClass:"line-number"},[a._v("14")]),t("br"),t("span",{staticClass:"line-number"},[a._v("15")]),t("br"),t("span",{staticClass:"line-number"},[a._v("16")]),t("br"),t("span",{staticClass:"line-number"},[a._v("17")]),t("br"),t("span",{staticClass:"line-number"},[a._v("18")]),t("br"),t("span",{staticClass:"line-number"},[a._v("19")]),t("br"),t("span",{staticClass:"line-number"},[a._v("20")]),t("br")])]),t("h4",{attrs:{id:"备份分区"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#备份分区","aria-hidden":"true"}},[a._v("#")]),a._v(" 备份分区")]),a._v(" "),t("p",[a._v("使用 "),t("code",[a._v("dd")]),a._v(" 命令将分区读到一个文件中，然后使用浏览器下载到本地。")]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("root@Widora:~"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# dd if=/dev/mtd2 of=/www/art.bin")]),a._v("\n128+0 records "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("in")]),a._v("\n128+0 records out\nroot@Widora:~"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# ls -l /www/art.bin")]),a._v("\n-rw-r--r--    1 root     root         65536 Apr 27 18:26 /www/art.bin\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br")])]),t("h2",{attrs:{id:"文件系统"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#文件系统","aria-hidden":"true"}},[a._v("#")]),a._v(" 文件系统")]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("root@Widora:/"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# df")]),a._v("\nFilesystem           1K-blocks      Used Available Use% Mounted on\nrootfs                   26496       752     25744   3% /\n/dev/root                 4864      4864         0 100% /rom\ntmpfs                    63232        84     63148   0% /tmp\n/dev/mtdblock6           26496       752     25744   3% /overlay\noverlayfs:/overlay       26496       752     25744   3% /\ntmpfs                      512         0       512   0% /dev\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br")])]),t("ol",[t("li",[a._v("引导程序启动内核完成后，由内核加载 "),t("code",[a._v("rootfs_rom")]),a._v(" 只读分区来完成系统的初步启动。"),t("code",[a._v("rootfs_rom")]),a._v(" 只读分区采用的是 Linux 内核支持的 "),t("strong",[a._v("squashFS")]),a._v(" 文件系统，加载完毕后将其挂载到 "),t("code",[a._v("/rom")]),a._v(" 目录，同时也挂载为 "),t("code",[a._v("/")]),a._v(" 目录。")]),a._v(" "),t("li",[a._v("系统将使用 "),t("strong",[a._v("JFFS2")]),a._v(" 文件系统格式化的 "),t("code",[a._v("rootfs_data")]),a._v(" 可写文件分区并将这部分挂载到 "),t("code",[a._v("/overlay")]),a._v(" 目录。")]),a._v(" "),t("li",[a._v("系统再将 "),t("code",[a._v("/overlay")]),a._v(" 透明挂载为 "),t("code",[a._v("/")]),a._v(" 根目录。")]),a._v(" "),t("li",[a._v("最后将一部分内存挂载为"),t("code",[a._v("/tmp")]),a._v(" 目录。")])]),a._v(" "),t("h3",{attrs:{id:"透明挂载根目录"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#透明挂载根目录","aria-hidden":"true"}},[a._v("#")]),a._v(" 透明挂载根目录/")]),a._v(" "),t("div",{staticClass:"tip custom-block"},[t("p",[a._v("OpenWrt 设计的一个特点是：系统先将 "),t("code",[a._v("rootfs_rom")]),a._v(" 挂载为 "),t("code",[a._v("/")]),a._v(" 根目录，这样就具备了一个完整的系统，然后再将 "),t("code",[a._v("rootfs_data")]),a._v(" 以透明方式挂载在 "),t("code",[a._v("/")]),a._v(" 根目录上。")])]),a._v(" "),t("ul",[t("li",[a._v("最终呈现的根文件系统是由 "),t("code",[a._v("rootfs_rom")]),a._v(" 和 "),t("code",[a._v("rootfs_data")]),a._v(" 两个分区组合在一起的效果。")]),a._v(" "),t("li",[a._v("对任何文件的修改（增、删、改）都会记录在 "),t("code",[a._v("rootfs_data")]),a._v(" 分区中。")]),a._v(" "),t("li",[a._v("读取文件内容时，首先检测 "),t("code",[a._v("rootfs_data")]),a._v(" 里的状态，再检测 "),t("code",[a._v("roots_rom")]),a._v(" 里的内容，最后输出结果。")])]),a._v(" "),t("div",{staticClass:"warning custom-block"},[t("p",[a._v("如果修改了一个名为 abc 的文件，那么在 "),t("code",[a._v("/rom")]),a._v(" 里还会保留修改之前的那个 abc 文件，同时在 "),t("code",[a._v("/overlay")]),a._v(" 里有修改后的 abc 文件，因此所占的空间将会倍增。这样带来的一个好处是，在任何时候，只要删除 "),t("code",[a._v("/overlay")]),a._v(" 里所有的文件，就能达到恢复出厂的效果。")])]),a._v(" "),t("h3",{attrs:{id:"常用文件夹"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#常用文件夹","aria-hidden":"true"}},[a._v("#")]),a._v(" 常用文件夹")]),a._v(" "),t("table",[t("thead",[t("tr",[t("th",[a._v("文件夹路径")]),a._v(" "),t("th",[a._v("作用")])])]),a._v(" "),t("tbody",[t("tr",[t("td",[a._v("/etc/")]),a._v(" "),t("td",[a._v("存放系统所有的配置文件")])]),a._v(" "),t("tr",[t("td",[a._v("/etc/init.d/")]),a._v(" "),t("td",[a._v("存放启动的服务脚本")])]),a._v(" "),t("tr",[t("td",[a._v("/etc/config/")]),a._v(" "),t("td",[a._v("存放 OpenWrt 的配置文件，包括网络")])]),a._v(" "),t("tr",[t("td",[a._v("/tmp/")]),a._v(" "),t("td",[a._v("存放临时文件和动态的配置文件")])]),a._v(" "),t("tr",[t("td",[a._v("/tmp/TZ")]),a._v(" "),t("td",[a._v("系统启动后所使用的时区参数")])])])]),a._v(" "),t("h2",{attrs:{id:"软件包管理器-opkg"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#软件包管理器-opkg","aria-hidden":"true"}},[a._v("#")]),a._v(" 软件包管理器 OPKG")]),a._v(" "),t("h3",{attrs:{id:"配置-opkg"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置-opkg","aria-hidden":"true"}},[a._v("#")]),a._v(" 配置 OPKG")]),a._v(" "),t("p",[t("code",[a._v("/etc/opkg.conf")]),a._v(" 文件保存 OPKG 相关设置：")]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("root@Widora:/"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# cat /etc/opkg.conf ")]),a._v("\ndest root /\ndest "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("ram")]),a._v(" /tmp\nlists_dir ext /var/opkg-lists\noption overlay_root /overlay\noption check_signature 1\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br")])]),t("table",[t("thead",[t("tr",[t("th",[a._v("配置选项")]),a._v(" "),t("th",[a._v("说明")])])]),a._v(" "),t("tbody",[t("tr",[t("td",[a._v("dest root")]),a._v(" "),t("td",[a._v("安装目标的跟路径")])]),a._v(" "),t("tr",[t("td",[a._v("dest ram")]),a._v(" "),t("td",[a._v("内存临时文件路径")])]),a._v(" "),t("tr",[t("td",[a._v("lists_dir ext")]),a._v(" "),t("td",[a._v("软件包列表文件")])]),a._v(" "),t("tr",[t("td",[a._v("option overlay_root")]),a._v(" "),t("td",[a._v("可写分区挂载位置")])])])]),a._v(" "),t("h3",{attrs:{id:"常用命令搭配"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#常用命令搭配","aria-hidden":"true"}},[a._v("#")]),a._v(" 常用命令搭配")]),a._v(" "),t("table",[t("thead",[t("tr",[t("th",[a._v("命令")]),a._v(" "),t("th",[a._v("说明")])])]),a._v(" "),t("tbody",[t("tr",[t("td",[a._v("opkg update")]),a._v(" "),t("td",[a._v("下载服务器上可用的软件包列表")])]),a._v(" "),t("tr",[t("td",[a._v("opkg upgrade <package>")]),a._v(" "),t("td",[a._v("升级软件包")])]),a._v(" "),t("tr",[t("td",[a._v("opkg install <package>")]),a._v(" "),t("td",[a._v("安装软件包")])]),a._v(" "),t("tr",[t("td",[a._v("opkg configure <package>")]),a._v(" "),t("td",[a._v("配置某一个软件包")])]),a._v(" "),t("tr",[t("td",[a._v("opkg remove <package>")]),a._v(" "),t("td",[a._v("卸载软件包")])]),a._v(" "),t("tr",[t("td",[a._v("opkg list")]),a._v(" "),t("td",[a._v("列出全部可用的软件包")])]),a._v(" "),t("tr",[t("td",[a._v("opkg list-installed")]),a._v(" "),t("td",[a._v("列出已安装的软件包")])]),a._v(" "),t("tr",[t("td",[a._v("opkg list-upgradable")]),a._v(" "),t("td",[a._v("列出可以升级的软件包")])]),a._v(" "),t("tr",[t("td",[a._v("opkg info [package|regexp]")]),a._v(" "),t("td",[a._v("显示指定软件包的信息")])]),a._v(" "),t("tr",[t("td",[a._v("opkg status [package|regexp]")]),a._v(" "),t("td",[a._v("显示指定软件包的状态")])]),a._v(" "),t("tr",[t("td",[a._v("opkg download <package>")]),a._v(" "),t("td",[a._v("下载一个软件包到当前目录，但不安装")])])])]),a._v(" "),t("div",{staticClass:"tip custom-block"},[t("p",[a._v("软件包列表可能会比较大，因此并不保存在系统中，每次启动需要首先执行 "),t("code",[a._v("opkg update")]),a._v(" 取得最新的软件包。")])]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("root@Widora:/"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# opkg update")]),a._v("\nDownloading http://downloads.openwrt.org/chaos_calmer/15.05.1/ramips/mt7688/packages/base/Packages.gz.\nUpdated list of available packages "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("in")]),a._v(" /var/opkg-lists/chaos_calmer_base.\nDownloading http://downloads.openwrt.org/chaos_calmer/15.05.1/ramips/mt7688/packages/base/Packages.sig.\nSignature check passed.\nDownloading http://downloads.openwrt.org/chaos_calmer/15.05.1/ramips/mt7688/packages/luci/Packages.gz.\nUpdated list of available packages "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("in")]),a._v(" /var/opkg-lists/chaos_calmer_luci.\nDownloading http://downloads.openwrt.org/chaos_calmer/15.05.1/ramips/mt7688/packages/luci/Packages.sig.\nSignature check passed.\nDownloading http://downloads.openwrt.org/chaos_calmer/15.05.1/ramips/mt7688/packages/management/Packages.gz.\nUpdated list of available packages "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("in")]),a._v(" /var/opkg-lists/chaos_calmer_management.\nDownloading http://downloads.openwrt.org/chaos_calmer/15.05.1/ramips/mt7688/packages/management/Packages.sig.\nSignature check passed.\nDownloading http://downloads.openwrt.org/chaos_calmer/15.05.1/ramips/mt7688/packages/packages/Packages.gz.\nUpdated list of available packages "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("in")]),a._v(" /var/opkg-lists/chaos_calmer_packages.\nDownloading http://downloads.openwrt.org/chaos_calmer/15.05.1/ramips/mt7688/packages/packages/Packages.sig.\nSignature check passed.\nDownloading http://downloads.openwrt.org/chaos_calmer/15.05.1/ramips/mt7688/packages/routing/Packages.gz.\nUpdated list of available packages "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("in")]),a._v(" /var/opkg-lists/chaos_calmer_routing.\nDownloading http://downloads.openwrt.org/chaos_calmer/15.05.1/ramips/mt7688/packages/routing/Packages.sig.\nSignature check passed.\nDownloading http://downloads.openwrt.org/chaos_calmer/15.05.1/ramips/mt7688/packages/telephony/Packages.gz.\nUpdated list of available packages "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("in")]),a._v(" /var/opkg-lists/chaos_calmer_telephony.\nDownloading http://downloads.openwrt.org/chaos_calmer/15.05.1/ramips/mt7688/packages/telephony/Packages.sig.\nSignature check passed.\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br"),t("span",{staticClass:"line-number"},[a._v("10")]),t("br"),t("span",{staticClass:"line-number"},[a._v("11")]),t("br"),t("span",{staticClass:"line-number"},[a._v("12")]),t("br"),t("span",{staticClass:"line-number"},[a._v("13")]),t("br"),t("span",{staticClass:"line-number"},[a._v("14")]),t("br"),t("span",{staticClass:"line-number"},[a._v("15")]),t("br"),t("span",{staticClass:"line-number"},[a._v("16")]),t("br"),t("span",{staticClass:"line-number"},[a._v("17")]),t("br"),t("span",{staticClass:"line-number"},[a._v("18")]),t("br"),t("span",{staticClass:"line-number"},[a._v("19")]),t("br"),t("span",{staticClass:"line-number"},[a._v("20")]),t("br"),t("span",{staticClass:"line-number"},[a._v("21")]),t("br"),t("span",{staticClass:"line-number"},[a._v("22")]),t("br"),t("span",{staticClass:"line-number"},[a._v("23")]),t("br"),t("span",{staticClass:"line-number"},[a._v("24")]),t("br"),t("span",{staticClass:"line-number"},[a._v("25")]),t("br")])]),t("h2",{attrs:{id:"uci-命令系统"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#uci-命令系统","aria-hidden":"true"}},[a._v("#")]),a._v(" UCI 命令系统")])])},[],!1,null,null,null);s.default=e.exports}}]);